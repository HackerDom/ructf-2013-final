0) CONFIG_CFQ_GROUP_IOSCHED=y
CONFIG_BLK_DEV_THROTTLING=y
0.1) Latest kernel
1) квоты
2) cgroups для каждого сервиса
3) init-скрипты
4) права в /home
5) pam_cgroups в system-auth и start-stop-daemon

6.0) emerge ruby mongodb erlang
     package { 'app-portage/layman': ensure => present }
     package { 'dev-util/strace': ensure => present }
     package { 'sys-process/htop': ensure => present }
6.1)
6.3) export SYBASE="/usr"
6.3) cpan install mango
6.4) g-cpan -i MongoDB
su user -s /bin/bash
cd
mkdir mongodb mongodb/run mongodb/db mongodb/log
rc-update add mongodb_user
6.6) quota user 2gb

7.1) use ithreads
8) services:
user(10000) Users API (and)
ses(10003) Simple Email Service (dimmo, perl)
mr(10002) MapReduce (Егор, erlang)
queue(10006) Message Queue (bay, rust)
dns(10004) Cache DNS (lena, ruby)
proxy(10005) TCP Balancer (kost, C)
Script API (andgein, PHP)
database(10001) Database API ? (umineko & krait, C++)
9) python2 by default
9.1) layman -a yac

10) nginx.conf, rc-update add nginx default
mkdir -p /var/lib/overlays/cpan/
PORTDIR_OVERLAY="/var/lib/overlays/cpan/"

------------------------ SERVICE DEPLOYMENT ------------------------

= user service =
chown -R user:user /home/user/
chmod +x /etc/init.d/user /etc/init.d/mongodb_user

g-cpan -i Mojolicious
g-cpan -i MongoDB

rc-update add user
rc-update add mongodb_user

= queue service =
chown -R queue:queue /home/queue/
chmod +x /etc/init.d/queue /etc/init.d/queue_web

rc-update add queue
rc-update add queue_web
